{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport Firebase from '../pages/api/auth/firebase';\n\nconst formatAuthUser = user => ({\n  uid: user.uid,\n  email: user.email\n});\n\nexport default function useFirebaseAuth() {\n  const {\n    0: authUser,\n    1: setAuthUser\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n\n  const authStateChanged = async authState => {\n    if (!authState) {\n      setAuthUser(null);\n      setLoading(false);\n      return;\n    }\n\n    setLoading(true);\n    var formattedUser = formatAuthUser(authState);\n    setAuthUser(formattedUser);\n    setLoading(false);\n  }; // listen for Firebase state change\n\n\n  useEffect(() => {\n    const unsubscribe = Firebase.auth().onAuthStateChanged(authStateChanged);\n    return () => unsubscribe();\n  }, []);\n  return {\n    authUser,\n    loading\n  };\n}","map":{"version":3,"sources":["/Users/davidvega/code/webstarter/client/components/useFirebaseAuth.js"],"names":["useState","useEffect","Firebase","formatAuthUser","user","uid","email","useFirebaseAuth","authUser","setAuthUser","loading","setLoading","authStateChanged","authState","formattedUser","unsubscribe","auth","onAuthStateChanged"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,QAAP,MAAqB,4BAArB;;AAEA,MAAMC,cAAc,GAAIC,IAAD,KAAW;AAChCC,EAAAA,GAAG,EAAED,IAAI,CAACC,GADsB;AAEhCC,EAAAA,KAAK,EAAEF,IAAI,CAACE;AAFoB,CAAX,CAAvB;;AAKA,eAAe,SAASC,eAAT,GAA2B;AACxC,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BT,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM;AAAA,OAACU,OAAD;AAAA,OAAUC;AAAV,MAAwBX,QAAQ,CAAC,IAAD,CAAtC;;AAEA,QAAMY,gBAAgB,GAAG,MAAOC,SAAP,IAAqB;AAC5C,QAAI,CAACA,SAAL,EAAgB;AACdJ,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACA;AACD;;AAEDA,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAIG,aAAa,GAAGX,cAAc,CAACU,SAAD,CAAlC;AACAJ,IAAAA,WAAW,CAACK,aAAD,CAAX;AACAH,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAXD,CAJwC,CAiBxC;;;AACAV,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMc,WAAW,GAAGb,QAAQ,CAACc,IAAT,GAAgBC,kBAAhB,CAAmCL,gBAAnC,CAApB;AACA,WAAO,MAAMG,WAAW,EAAxB;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,SAAO;AACLP,IAAAA,QADK;AAELE,IAAAA;AAFK,GAAP;AAID","sourcesContent":["import { useState, useEffect } from 'react'\nimport Firebase from '../pages/api/auth/firebase';\n\nconst formatAuthUser = (user) => ({\n  uid: user.uid,\n  email: user.email,\n});\n\nexport default function useFirebaseAuth() {\n  const [authUser, setAuthUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const authStateChanged = async (authState) => {\n    if (!authState) {\n      setAuthUser(null);\n      setLoading(false);\n      return;\n    }\n\n    setLoading(true);\n    var formattedUser = formatAuthUser(authState);\n    setAuthUser(formattedUser);\n    setLoading(false);\n  };\n\n  // listen for Firebase state change\n  useEffect(() => {\n    const unsubscribe = Firebase.auth().onAuthStateChanged(authStateChanged);\n    return () => unsubscribe();\n  }, []);\n\n  return {\n    authUser,\n    loading,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}